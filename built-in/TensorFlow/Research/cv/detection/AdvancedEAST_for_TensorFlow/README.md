# advancedeast  网络迁移

```shell
网络源码路径：https://github.com/huoyijie/AdvancedEAST
论文地址：
```

### 1、模型概述：

一两句话简述。

##### 注：该网络基于20210XXX主线newest版本迁移。 

### 2、数据集：

名称：tianchi ICPR dataset 

路径：` 10.136.165.4服务器:/turingDataset/CarPeting_TF_AdvancedEAST`

### 3、依赖安装: 

`requirements.txt随网络模型归档至gitlab仓。`

```shell
tensorflow==1.15.0
。。。

```

### 4、训练详细调测步骤：

#### 1、数据集预处理：

需要文件：vgg16_weights_tf_dim_ordering_tf_kernels_notop.h5（下载路径：https://github.com/fchollet/deep-learning-models/releases/download/v0.1/vgg16_weights_tf_dim_ordering_tf_kernels_notop.h5）  放置/root/.keras/models  

#### 2、训练命令：

```shell


```

封装后：

```
bash run_npu_1p.sh
```

#### 3、NPU当前问题：（NPU执行fail时记录）

#### 3、NPU训练结果：

##### `ckpt`文件和`graph`文件存放路径：

` 10.136.165.4服务器:/turingDataset/results/CarPeting_TF_AdvancedEAST/ckpt_npu`

```shell
精度性能示例：（部分打屏结果如下）
1101/1125 [============================>.] - ETA: 1s - loss: 0.8832
1103/1125 [============================>.] - ETA: 0s - loss: 0.8832
1105/1125 [============================>.] - ETA: 0s - loss: 0.8835
1107/1125 [============================>.] - ETA: 0s - loss: 0.8835
1109/1125 [============================>.] - ETA: 0s - loss: 0.8834
1111/1125 [============================>.] - ETA: 0s - loss: 0.8835
1113/1125 [============================>.] - ETA: 0s - loss: 0.8833
1115/1125 [============================>.] - ETA: 0s - loss: 0.8833
1117/1125 [============================>.] - ETA: 0s - loss: 0.8832
1119/1125 [============================>.] - ETA: 0s - loss: 0.8833
1121/1125 [============================>.] - ETA: 0s - loss: 0.8832
1123/1125 [============================>.] - ETA: 0s - loss: 0.8830
1125/1125 [==============================] - 53s 47ms/step - loss: 0.8831 - val_loss: 1.1033
```

#### 4、GPU训练结果：

##### 环境：Tesla V100卡 

##### `ckpt`文件，loss+perf_npu.txt存放路径：

` 10.136.165.4服务器:/turingDataset/GPU/CarPeting_TF_AdvancedEAST`

```shell
精度性能示例：（部分打屏结果如下）
1110/1125 [============================>.] - ETA: 0s - loss: 0.2701
1111/1125 [============================>.] - ETA: 0s - loss: 0.2702
1112/1125 [============================>.] - ETA: 0s - loss: 0.2702
1113/1125 [============================>.] - ETA: 0s - loss: 0.2702
1114/1125 [============================>.] - ETA: 0s - loss: 0.2704
1115/1125 [============================>.] - ETA: 0s - loss: 0.2703
1116/1125 [============================>.] - ETA: 0s - loss: 0.2703
1117/1125 [============================>.] - ETA: 0s - loss: 0.2703
1118/1125 [============================>.] - ETA: 0s - loss: 0.2702
1119/1125 [============================>.] - ETA: 0s - loss: 0.2702
1120/1125 [============================>.] - ETA: 0s - loss: 0.2702
1121/1125 [============================>.] - ETA: 0s - loss: 0.2703
1122/1125 [============================>.] - ETA: 0s - loss: 0.2703
1123/1125 [============================>.] - ETA: 0s - loss: 0.2702
1124/1125 [============================>.] - ETA: 0s - loss: 0.2703
1125/1125 [==============================] - 77s 68ms/step - loss: 0.2703 - val_loss: 0.4661
```

#### 5、GPU/NPU loss收敛趋势：

| step | GPU loss | NPU loss |
| :--- | -------- | :------- |
| 1125 | 0.2703   | 0.8831   |
|      |          |          |

#### 6、单step耗时 NPU/GPU：

```shell
NPU/GPU=0.69
```

